---
import AppLayout from "../../layouts/app/AppLayout.astro";
import { SITE_TITLE } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";

const posts = (await getCollection("_blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<AppLayout title={`${SITE_TITLE} - Blog`}>
	<div class="w-full max-w-4xl px-4 md:px-8">
		<section>
			<ul class="flex flex-wrap gap-8 list-none m-0 p-0 md:gap-4 sm:gap-2">
				{
					posts.map((post, index) => (
						<li
							class={`${index === 0 ? "w-full mb-4 text-center" : "w-[calc(50%-1rem)] sm:w-full sm:text-center"}`}
						>
							<a href={`/blog/${post.id}/`} class="block transition-all duration-200">
								<img
									width={720}
									height={360}
									src={post.data.heroImage}
									alt=""
									class={`rounded-xl mb-2 transition-all duration-200 hover:shadow-lg ${index === 0 ? "w-full" : ""}`}
								/>
								<h4
									class={`m-0 text-gray-900 dark:text-gray-100 leading-tight ${index === 0 ? "text-4xl sm:text-2xl" : ""} hover:text-blue-600 dark:hover:text-blue-400`}
								>
									{post.data.title}
								</h4>
								<p class="m-0 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400">
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</div>
</AppLayout>
